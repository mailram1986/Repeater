<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CO Attainment Results</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        .header-text {
            text-align: center;
            margin-bottom: 20px;
        }
        .chart-container {
            margin: 30px auto;
            max-width: 1000px;
        }
        .table-container {
            max-width: 800px;
            margin: 30px auto;
        }
    </style>
</head>
<body class="bg-light">

    <div class="container chart-container bg-white p-4 rounded shadow">
        <div class="header-text">
            <h3>Course Attainment – {{ subject }}</h3>
            <p><strong>Faculty Coordinator:</strong> {{ faculty }} |
               <strong>Academic Year:</strong> {{ academic_year }} |
               <strong>Number of Students:</strong> {{ total_students }}</p>
        </div>

        <!-- Embed Plotly chart -->
        {{ chart_html|safe }}
    </div>

    <div class="container table-container bg-white p-4 rounded shadow">
        <h4 class="text-center mb-4">Attainment Level Summary</h4>
        <table class="table table-bordered table-striped text-center">
            <thead class="table-secondary">
                <tr>
                    <th>Course Outcome</th>
                    <th>Level 3 (≥75%)</th>
                    <th>Level 2 (60–74%)</th>
                    <th>Level 1 (<60%)</th>
                    <th>Total Students</th>
                </tr>
            </thead>
            <tbody>
                {% for row in attainment_table %}
                <tr>
                    <td>{{ row["Course Outcome"] }}</td>
                    <td>{{ row["Level 3 (≥75%)"] }}</td>
                    <td>{{ row["Level 2 (60–74%)"] }}</td>
                    <td>{{ row["Level 1 (<60%)"] }}</td>
                    <td>{{ row["Total Students"] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div class="text-center mt-4">
            <a href="/" class="btn btn-secondary">Upload Another File</a>
        </div>
    </div>

</body>
</html>
